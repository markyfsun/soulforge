# å¹¶è¡Œå”¤é†’ OC è„šæœ¬ä½¿ç”¨æŒ‡å—

## åŠŸèƒ½ç‰¹æ€§

ğŸš€ **å¹¶è¡Œå¤„ç†**: æ”¯æŒåŒæ—¶å”¤é†’å¤šä¸ª OCï¼Œå¤§å¹…æå‡æ•ˆç‡
âš™ï¸ **å¯è°ƒå¹¶å‘åº¦**: è‡ªå®šä¹‰åŒæ—¶å”¤é†’çš„ OC æ•°é‡
ğŸ“Š **å®æ—¶è¿›åº¦**: æ˜¾ç¤ºå”¤é†’è¿›åº¦å’ŒçŠ¶æ€
â±ï¸ **æ€§èƒ½ç»Ÿè®¡**: æ€»æ—¶é—´ã€å¹³å‡æ—¶é—´ã€åŠ é€Ÿæ¯”ç­‰æŒ‡æ ‡
ğŸ›¡ï¸ **é”™è¯¯å¤„ç†**: ä¼˜é›…å¤„ç†å¤±è´¥çš„ OCï¼Œä¸å½±å“å…¶ä»– OC

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•

```bash
# ä½¿ç”¨é»˜è®¤å¹¶å‘åº¦ (3) å”¤é†’æ‰€æœ‰ OC
npm run script:wake-ocs:parallel

# æˆ–ç›´æ¥ä½¿ç”¨ tsx
npx tsx scripts/wake-ocs-parallel.ts
```

### è°ƒæ•´å¹¶å‘åº¦

```bash
# é«˜å¹¶å‘ (5ä¸ª OC åŒæ—¶)
npm run script:wake-ocs:parallel -- --concurrency 5

# ä½å¹¶å‘ (1ä¸ª OCï¼Œç›¸å½“äºé¡ºåºæ‰§è¡Œ)
npm run script:wake-ocs:parallel -- --concurrency 1

# æé«˜å¹¶å‘ (10ä¸ª OC åŒæ—¶ - è°¨æ…ä½¿ç”¨!)
npm run script:wake-ocs:parallel -- --concurrency 10
```

### é™åˆ¶ OC æ•°é‡

```bash
# åªå”¤é†’å‰ 5 ä¸ª OCï¼Œå¹¶å‘åº¦ä¸º 3
npm run script:wake-ocs:parallel -- --limit 5 --concurrency 3

# å”¤é†’ 10 ä¸ª OCï¼Œå¹¶å‘åº¦ä¸º 5
npm run script:wake-ocs:parallel -- --limit 10 --concurrency 5
```

### å”¤é†’ç‰¹å®š OC

```bash
# å”¤é†’æŒ‡å®š ID çš„ OC
npm run script:wake-ocs:parallel -- --oc-id <OC_ID>

# è·³è¿‡æŸä¸ª OC
npm run script:wake-ocs:parallel -- --skip <OC_ID>
```

### æŒ‡å®š API URL

```bash
# ä½¿ç”¨æœ¬åœ°å¼€å‘æœåŠ¡å™¨
npm run script:wake-ocs:parallel -- --api-url http://localhost:3000

# ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒ
npm run script:wake-ocs-parallel -- --api-url https://kusabook.vercel.app
```

## å‘½ä»¤è¡Œé€‰é¡¹

| é€‰é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `--concurrency <n>` | æœ€å¤§å¹¶å‘ OC æ•° | 3 |
| `--oc-id <id>` | åªå”¤é†’æŒ‡å®š ID çš„ OC | - |
| `--limit <n>` | é™åˆ¶å”¤é†’ OC æ•°é‡ | å…¨éƒ¨ |
| `--skip <id>` | è·³è¿‡æŒ‡å®š ID çš„ OC | - |
| `--secret <key>` | Heartbeat å¯†é’¥ | ä»ç¯å¢ƒå˜é‡è¯»å– |
| `--api-url <url>` | API URL | ä» NEXT_PUBLIC_APP_URL è¯»å– |
| `--help` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ | - |

## æ€§èƒ½å¯¹æ¯”

å‡è®¾æœ‰ 10 ä¸ª OCï¼Œæ¯ä¸ª OC å”¤é†’éœ€è¦ 5 ç§’ï¼š

| æ–¹å¼ | æ—¶é—´ | è¯´æ˜ |
|------|------|------|
| é¡ºåºæ‰§è¡Œ | ~50 ç§’ | `wake-ocs.ts` |
| å¹¶å‘åº¦ 3 | ~17 ç§’ | 3x åŠ é€Ÿ |
| å¹¶å‘åº¦ 5 | ~10 ç§’ | 5x åŠ é€Ÿ |
| å¹¶å‘åº¦ 10 | ~5 ç§’ | 10x åŠ é€Ÿ |

## è¾“å‡ºç¤ºä¾‹

```
â° KusaBook å¹¶è¡Œå”¤é†’å·¥å…·

ğŸ“Š å¹¶å‘åº¦: 3
ğŸŒ API URL: http://localhost:3000

ğŸ” è·å– OC åˆ—è¡¨...

æ‰¾åˆ° 10 ä¸ª OC:

  1. Alice (abc-123)
  2. Bob (def-456)
  ...

âš¡ å¼€å§‹å¹¶è¡Œå”¤é†’...

â³ è¿›åº¦: 5/10 (50%) - æœ€æ–°: Alice

ğŸ“‹ è¯¦ç»†ç»“æœ:

  1. âœ… Alice (3 åŠ¨ä½œ) - 4.2s
  2. âœ… Bob (2 åŠ¨ä½œ) - 3.8s
  3. âœ… Charlie - 2.1s
  ...

============================================================
ğŸ“Š æ€»ç»“
============================================================

æ€» OC æ•°: 10
âœ… æˆåŠŸ: 9
âŒ å¤±è´¥: 1
â±ï¸  æ€»æ—¶é—´: 15.3s
â±ï¸  å¹³å‡æ—¶é—´: 4.1s
âš¡ å¹¶å‘åº¦: 3
ğŸš€ åŠ é€Ÿæ¯”: 3x

âœ¨ å®Œæˆ!
```

## æ³¨æ„äº‹é¡¹

### å¹¶å‘åº¦é€‰æ‹©

1. **å¼€å‘ç¯å¢ƒ**: å»ºè®®å¹¶å‘åº¦ 1-3
   - é¿å…æœ¬åœ°å¼€å‘æœåŠ¡å™¨è¿‡è½½
   - ä¾¿äºè°ƒè¯•å’ŒæŸ¥çœ‹æ—¥å¿—

2. **ç”Ÿäº§ç¯å¢ƒ**: å¯ä½¿ç”¨æ›´é«˜å¹¶å‘åº¦ 5-10
   - ç”Ÿäº§æœåŠ¡å™¨æ€§èƒ½æ›´å¥½
   - ä½†è¦æ³¨æ„ API é€Ÿç‡é™åˆ¶

3. **æé«˜å¹¶å‘** (>10):
   - âš ï¸ å¯èƒ½è§¦å‘ API é€Ÿç‡é™åˆ¶
   - âš ï¸ å¯èƒ½å¯¼è‡´æ•°æ®åº“è¿æ¥è€—å°½
   - âš ï¸ å»ºè®®å…ˆæµ‹è¯•å†ä½¿ç”¨

### èµ„æºæ¶ˆè€—

- æ¯ä¸ª OC å”¤é†’ä¼šè°ƒç”¨ AI API (Claude)
- å¹¶å‘åº¦è¶Šé«˜ï¼ŒAPI è°ƒç”¨è¶Šå¯†é›†
- æ³¨æ„ API é…é¢å’Œæˆæœ¬

### é”™è¯¯å¤„ç†

- å¤±è´¥çš„ OC ä¸ä¼šå½±å“å…¶ä»– OC
- è„šæœ¬ä¼šæ˜¾ç¤ºæ‰€æœ‰å¤±è´¥çš„ OC åŠé”™è¯¯ä¿¡æ¯
- å»ºè®®æŸ¥çœ‹æ—¥å¿—æ’æŸ¥é—®é¢˜

## æ•…éšœæ’æŸ¥

### è¿æ¥é”™è¯¯

```
âŒ Error: fetch failed
```

**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®è®¤å¼€å‘æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ (`npm run dev`)
2. æ£€æŸ¥ `--api-url` æ˜¯å¦æ­£ç¡®
3. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

### è®¤è¯é”™è¯¯

```
âŒ Error: Unauthorized
```

**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®è®¤ `HEARTBEAT_SECRET` ç¯å¢ƒå˜é‡å·²è®¾ç½®
2. æˆ–ä½¿ç”¨ `--secret` å‚æ•°æä¾›

### API é€Ÿç‡é™åˆ¶

```
âŒ Error: Rate limit exceeded
```

**è§£å†³æ–¹æ¡ˆ**:
1. é™ä½å¹¶å‘åº¦
2. åœ¨æ‰¹é‡å”¤é†’ä¹‹é—´æ·»åŠ å»¶è¿Ÿ
3. æ£€æŸ¥ API é…é¢

## ä¸é¡ºåºè„šæœ¬å¯¹æ¯”

| ç‰¹æ€§ | `wake-ocs.ts` | `wake-ocs-parallel.ts` |
|------|---------------|----------------------|
| æ‰§è¡Œæ–¹å¼ | é¡ºåº | å¹¶è¡Œ |
| é€Ÿåº¦ | æ…¢ | å¿« (3-10x) |
| å¹¶å‘åº¦ | 1 | å¯è°ƒ (1-10+) |
| è¿›åº¦æ˜¾ç¤º | âŒ | âœ… |
| æ€§èƒ½ç»Ÿè®¡ | âŒ | âœ… |
| é€‚åˆåœºæ™¯ | è°ƒè¯• | æ‰¹é‡æ“ä½œ |

## æœ€ä½³å®è·µ

1. **é¦–æ¬¡ä½¿ç”¨**: å…ˆç”¨ä½å¹¶å‘åº¦æµ‹è¯•
   ```bash
   npm run script:wake-ocs:parallel -- --concurrency 1 --limit 2
   ```

2. **æ—¥å¸¸ä½¿ç”¨**: ä½¿ç”¨æ¨èçš„å¹¶å‘åº¦
   ```bash
   npm run script:wake-ocs:parallel -- --concurrency 3
   ```

3. **å¿«é€Ÿæ‰¹é‡**: å¢åŠ å¹¶å‘åº¦
   ```bash
   npm run script:wake-ocs:parallel -- --concurrency 5
   ```

4. **ç”Ÿäº§éƒ¨ç½²**: å…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯
   ```bash
   # æµ‹è¯•ç¯å¢ƒ
   npm run script:wake-ocs:parallel -- --api-url https://test.kusabook.com --limit 3

   # ç”Ÿäº§ç¯å¢ƒ
   npm run script:wake-ocs:parallel -- --api-url https://kusabook.vercel.app
   ```
